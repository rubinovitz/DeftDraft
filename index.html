<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta charset="utf-8">

<title>DeftDraft</title>

<script src="mousetrap.min.js"></script>

<style type="text/css" media="screen">
   body {
      background-color: #ddffee;
   }
   #deft {
      float: left;
      font-size: 2em;
      margin-right: 30px;
   }

   .highlight {
      background-color: #ffeeee;
   }

</style>

<script type="text/javascript">
    var stack_list = [[]];
    var stack_pos = [0];
    var current_stack = 0;
    var saved = "";
    var current_option = "";


    function display_stack(stack) {
        var html = "selection: " + current_option + "<br/>";
        for (var item in stack) {
            html += stack[item];
            html += "<br />"
        }
        return html;
    }

   // cycle stacks left
   Mousetrap.bind('alt+h', function(e) {
if (e.preventDefault) {
        e.preventDefault();
    } else {
        // internet explorer
        e.returnValue = false;
    }
         var current = document.getElementById("deft").value;

         current_stack--;
         if (current_stack < 0) {
            current_stack = stack_list.length - 1;
         }

         var new_option = stack_list[current_stack][stack_pos[current_stack]];
         document.getElementById("deft").value = current.replace(current_option, new_option);
         current_option = new_option;
         
         document.getElementById("snippets").innerHTML = display_stack(stack_list[current_stack]);
         });

    //cycle stacks right
   Mousetrap.bind('alt+l', function(e) {
if (e.preventDefault) {
        e.preventDefault();
    } else {
        // internet explorer
        e.returnValue = false;
    }
         var current = document.getElementById("deft").value;

         current_stack++;
         if (current_stack >= stack_list.length) {
            current_stack = 0;
         }

         var new_option = stack_list[current_stack][stack_pos[current_stack]];
         document.getElementById("deft").value = current.replace(current_option, new_option);
         current_option = new_option;

         document.getElementById("snippets").innerHTML = display_stack(stack_list[current_stack]);
         });

    // selection up
   Mousetrap.bind('alt+k', function(e) {
if (e.preventDefault) {
        e.preventDefault();
    } else {
        // internet explorer
        e.returnValue = false;
    }
         var current = document.getElementById("deft").value;

         stack_pos[current_stack]++;
         if (stack_pos[current_stack] >= stack_list[current_stack].length) {
             stack_pos[current_stack] = 0;
         }

         var new_option = stack_list[current_stack][stack_pos[current_stack]];
         document.getElementById("deft").value = current.replace(current_option, new_option);
         current_option = new_option;

         document.getElementById("snippets").innerHTML = display_stack(stack_list[current_stack]);
      });

   Mousetrap.bind('alt+j', function(e) {
if (e.preventDefault) {
        e.preventDefault();
    } else {
        // internet explorer
        e.returnValue = false;
    }
         var current = document.getElementById("deft").value;

         stack_pos[current_stack]--;
         if (stack_pos[current_stack] < 0) {
             stack_pos[current_stack] = stack_list[current_stack].length - 1;
         }

         var new_option = stack_list[current_stack][stack_pos[current_stack]];
         document.getElementById("deft").value = current.replace(current_option, new_option);
         current_option = new_option;

         document.getElementById("snippets").innerHTML = display_stack(stack_list[current_stack]);
      });

        Mousetrap.bind('alt+s', function(e) {
            if (e.preventDefault) {
            e.preventDefault();
            } else {
            // internet explorer
            e.returnValue = false;
            }
            saved = document.getElementById("deft").value;
            current_option = "";

            stack_list.push([]);
            stack_pos.push(0);
            current_stack = stack_list.length - 1;
         document.getElementById("snippets").innerHTML = display_stack(stack_list[current_stack]);
        });

    Mousetrap.bind('alt+d', function(e) {
if (e.preventDefault) {
        e.preventDefault();
    } else {
        // internet explorer
        e.returnValue = false;
    }
            var current = document.getElementById("deft").value;
            var snipped = current.replace(saved, "");

            document.getElementById("deft").value = saved;
            stack_list[current_stack].push(snipped);
         document.getElementById("snippets").innerHTML = display_stack(stack_list[current_stack]);
            });


</script>
</head>
<body>
   <h2>DeftDraft</h2>
   <textarea class="textarea mousetrap" id="deft" style="width: 810px; height: 200px"></textarea>
   <div id="snippets">selection:</div>

</body>
</html>
